
<!doctype html><html lang="ja"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
<title>Leaderboards</title>
<link rel="stylesheet" href="/style.css"/>
<script type="module">
import { getLeaderboard } from "/js/common.js";
const games = ["aim","memory","numbers","fusion"];
async function load(){
  const wrap = document.querySelector("#wrap");
  for(const g of games){
    const sec = document.createElement("div");
    sec.className = "card";
    sec.innerHTML = "<h3>"+g.toUpperCase()+"</h3><div class='list' id='list-"+g+"'></div>";
    wrap.appendChild(sec);
    const data = await getLeaderboard(g);
    const list = document.querySelector("#list-"+g);
    list.innerHTML = (data.records||[]).map((r,i)=>{
      const meta = r && r.meta || {};
      let extra = "";
      if(g === "fusion"){
        if(typeof meta.correct === "number"){ extra = ` â€” æ­£è§£ ${meta.correct}å•`; }
      }else{
        const sec = typeof meta.sec === "number" ? meta.sec : null;
        extra = (sec!==null) ? ` â€” ${sec.toFixed(2)}s` : "";
      }
      return `<div class='kv'><span>#${i+1} ${r.player}</span><b>${r.score}${extra}</b></div>`;
    }).join("") || "<div class='small'>ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>";
  }
}
document.addEventListener("DOMContentLoaded", load);
</script>

<script>
// doubleTapGuard: prevent accidental double-tap zoom
let __lastTouchEnd = 0;
document.addEventListener('touchend', function (e) {
  const now = Date.now();
  if (now - __lastTouchEnd <= 300) { e.preventDefault(); }
  __lastTouchEnd = now;
}, { passive: false });
</script>

</head><body>
<div class="container">
  <div class="header">
    <h1>ğŸ† Leaderboards</h1>
    <a class="game" href="/">â† æˆ»ã‚‹</a>
  </div>
  <div id="wrap" class="grid"></div>
</div>
</body></html>
